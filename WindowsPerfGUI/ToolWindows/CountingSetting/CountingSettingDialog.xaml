<platform:DialogWindow
    x:Class="WindowsPerfGUI.ToolWindows.CountingSetting.CountingSettingDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Components="clr-namespace:WindowsPerfGUI.Components"
    xmlns:catalog="clr-namespace:Microsoft.VisualStudio.Imaging;assembly=Microsoft.VisualStudio.ImageCatalog"
    xmlns:converters="clr-namespace:WindowsPerfGUI.Utils.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:locals="clr-namespace:WindowsPerfGUI.Resources.Locals"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:platform="clr-namespace:Microsoft.VisualStudio.PlatformUI;assembly=Microsoft.VisualStudio.Shell.15.0"
    xmlns:toolkit="clr-namespace:Community.VisualStudio.Toolkit;assembly=Community.VisualStudio.Toolkit"
    xmlns:utils="clr-namespace:WindowsPerfGUI.ToolWindows.CountingSetting"
    Width="900"
    Height="600"
    toolkit:Themes.UseVsTheme="True"
    mc:Ignorable="d">
    <platform:DialogWindow.DataContext>
        <utils:CountingSettingsForm />
    </platform:DialogWindow.DataContext>
    <platform:DialogWindow.Resources>
        <SolidColorBrush x:Key="VizSurfaceGreenMedium" Color="{DynamicResource VsColor.VizSurfaceGreenMedium}" />
        <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
        <converters:NullToDisabledConverter x:Key="NullToDisabledConverter" />
        <converters:EmptyStringToDisabledConverter x:Key="EmptyStringToDisabledConverter" />
        <converters:NegativeIntToDisabledConverter x:Key="NegativeIntToDisabledConverter" />
        <converters:InverseBooleanConverter x:Key="InverseBooleanConverter" />
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    </platform:DialogWindow.Resources>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <GroupBox
            Grid.Row="0"
            Grid.Column="0"
            Padding="5">
            <GroupBox.Header>
                <Label Content="{x:Static locals:SamplingSettingsLanguagePack.Payload}" />
            </GroupBox.Header>
            <StackPanel Orientation="Vertical">
                <Components:CustomRadioButtonControl
                    x:Name="CustomProcessRadioButton"
                    Content="{x:Static locals:SamplingSettingsLanguagePack.PayloadFromFile}"
                    GroupName="CountingSourceRadioButtonGroup"
                    IsChecked="{Binding CustomProcessRadioButton, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                <Components:FilePicker
                    x:Name="CountingSourcePathFilePicker"
                    IsEnabled="{Binding IsChecked, ElementName=CustomProcessRadioButton, Converter={StaticResource NullToDisabledConverter}}"
                    OnChange="FilePickerTextBox_TextChanged" />
                <StackPanel Orientation="Horizontal">
                    <Components:CustomRadioButtonControl
                        x:Name="CurrentProjectProcessRadioButton"
                        Content="{x:Static locals:SamplingSettingsLanguagePack.ProjectTarget}"
                        GroupName="CountingSourceRadioButtonGroup"
                        IsChecked="{Binding CurrentProjectProcessRadioButton, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                    <Label x:Name="ProjectTargetConfigLabel" />
                </StackPanel>
                <StackPanel Margin="0,10,0,0" Orientation="Horizontal">
                    <Components:CustomRadioButtonControl
                        x:Name="NoTargetRadioButton"
                        Content="{x:Static locals:CountingSettingsLanguagePack.NoTarget}"
                        GroupName="CountingSourceRadioButtonGroup"
                        IsChecked="{Binding NoTarget, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                    <Label x:Name="NoTargetConfigLabel" />
                </StackPanel>
                <Label Content="{x:Static locals:SamplingSettingsLanguagePack.ExtraArgs}" />
                <Components:CustomTextBoxControl
                    x:Name="ExtraArgs"
                    Padding="2"
                    Placeholder="extra args..."
                    Text="{Binding ExtraArgs, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
            </StackPanel>
        </GroupBox>
        <GroupBox Grid.Row="1" Padding="5">
            <GroupBox.Header>
                <Label Content="{x:Static locals:SamplingSettingsLanguagePack.Parameters}" />
            </GroupBox.Header>
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <Label
                        Grid.Row="2"
                        Grid.Column="0"
                        Content="{x:Static locals:SamplingSettingsLanguagePack.Timeout}" />
                    <Components:CustomTextBoxControl
                        x:Name="CountingTimeoutTextBox"
                        Grid.Row="2"
                        Grid.Column="1"
                        Margin="0,0,0,10"
                        Padding="2"
                        Placeholder="2.5"
                        Text="{Binding CountingTimeout, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                    <CheckBox
                        x:Name="EnableTimelineRadioButton"
                        Content="Timeline"
                        IsChecked="{Binding IsTimelineSelected, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                    <StackPanel Visibility="{Binding IsTimelineSelected, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <Label Content="Iterations" />
                        <Components:CustomTextBoxControl
                            x:Name="CountingTimelineIterations"
                            Padding="2"
                            Placeholder="1"
                            Text="{Binding TimelineIterations, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                        <Label Content="Interval" />
                        <Components:CustomTextBoxControl
                            x:Name="CountingTimelineInterval"
                            Padding="2"
                            Placeholder="0.5"
                            Text="{Binding TimelineInterval, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                    </StackPanel>
                    <Label
                        Grid.Row="0"
                        Grid.Column="0"
                        Content="{x:Static locals:SamplingSettingsLanguagePack.CpuCore}" />
                    <Components:ButtonGrid
                        x:Name="CpuCoresGrid"
                        FilePath="{Binding FilePath}"
                        SelectedColor="{StaticResource VizSurfaceGreenMedium}"
                        SelectedItems="{Binding CPUCores, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
                </StackPanel>
            </ScrollViewer>
        </GroupBox>
        <StackPanel Grid.Row="2" Grid.ColumnSpan="2">
            <Label Content="{x:Static locals:SamplingSettingsLanguagePack.WperfCommandPreview}" />
            <Components:CustomTextBoxControl
                x:Name="CountingCommandCallTextBox"
                Padding="2"
                IsReadOnly="True"
                Placeholder="wperf sample"
                Text="{Binding CommandLinePreview, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" />
            <Components:CustomButtonControl
                Margin="0,10,0,10"
                Padding="20,5,20,5"
                HorizontalAlignment="Right"
                Click="StartCounting_Click"
                Content="{x:Static locals:CountingSettingsLanguagePack.Start}" />
        </StackPanel>
    </Grid>
</platform:DialogWindow>